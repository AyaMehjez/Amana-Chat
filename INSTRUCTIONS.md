# ุชุนูููุงุช ุงูุงุณุชุฎุฏุงู - Amana Chat

## ๐ ูุธุฑุฉ ุนุงูุฉ

ุชู ุจูุงุก ูุงุฌูุฉ ุฏุฑุฏุดุฉ ูุงููุฉ ุจุงุณุชุฎุฏุงู Next.js ู Ably. ุงููุดุฑูุน ุฌุงูุฒ ููุงุณุชุฎุฏุงู ูุญููุงู ูุนูู Vercel.

## ๐ ุงูุฎุทูุงุช ุงูุณุฑูุนุฉ

### 1. ุชุซุจูุช ุงูููุชุจุงุช

```bash
cd Amana-Chat
npm install
```

**ููุงุญุธุฉ:** ุงูููุชุจุงุช ุงููุทููุจุฉ:
- `ably` - ููุชุจุฉ Ably SDK
- `next` - Next.js framework
- `react` ู `react-dom` - React

### 2. ููู ุงูุจูุฆุฉ

ุงูููู `.env.local` ููุฌูุฏ ุจุงููุนู ูุน API Key ุงูุฎุงุต ุจู:
```
ABLY_API_KEY=hXAj1g.wVBH3g:HU-kXrenZK4SJe1mYGg5IM-8M2e092OFqV1JpvWA_Rs
```

**โ๏ธ ููู:** ูุฐุง ุงูููู ููุฌูุฏ ูู `.gitignore` ููู ูุชู ุฑูุนู ุฅูู GitHub.

### 3. ุชุดุบูู ุงูุชุทุจูู

```bash
npm run dev
```

ุงูุชุญ ุงููุชุตูุญ ุนูู: **http://localhost:3000**

## ๐ ูููู ุงููุดุฑูุน

```
Amana-Chat/
โโโ app/
โ   โโโ api/
โ   โ   โโโ ably-token/
โ   โ       โโโ route.ts          # Token Endpoint - ูููุฏ ุชููู ุขูู
โ   โโโ components/
โ   โ   โโโ Chat.tsx              # ูููู ุงูุฏุฑุฏุดุฉ ุงูุฑุฆูุณู
โ   โโโ layout.tsx                # Layout ุงูุฑุฆูุณู
โ   โโโ page.tsx                  # ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ
โ   โโโ globals.css               # ุงูุฃููุงุท ุงูุนุงูุฉ
โโโ .env.local                    # ูุชุบูุฑุงุช ุงูุจูุฆุฉ (ูุง ูุชู ุฑูุนู)
โโโ .env.local.example           # ูุซุงู ูููู ุงูุจูุฆุฉ
โโโ package.json                  # ุงูููุชุจุงุช ุงููุทููุจุฉ
โโโ README.md                     # ุฏููู ุงููุดุฑูุน
โโโ SETUP.md                      # ุฏููู ุงูุฅุนุฏุงุฏ ุงูุณุฑูุน
โโโ INSTRUCTIONS.md              # ูุฐุง ุงูููู
```

## ๐ง ุดุฑุญ ุงููููุงุช

### 1. Token Endpoint (`app/api/ably-token/route.ts`)

**ุงููุธููุฉ:**
- ูููุฏ ุชููู ุขูู ููุนููู ููุงุชุตุงู ุจู Ably
- ูุญุตู ุนูู API Key ูู ูุชุบูุฑุงุช ุงูุจูุฆุฉ (`.env.local` ูุญููุงู ุฃู Vercel Environment Variables)
- ูุญุฏุฏ ุงูุตูุงุญูุงุช ุงููุทููุจุฉ ููููุงุฉ `chat:general`

**ููู ูุนูู:**
1. ุงูุนููู ูุทูุจ ุงูุชููู ูู `/api/ably-token`
2. ุงูุฎุงุฏู ูููุฏ ุชููู ุจุงุณุชุฎุฏุงู API Key
3. ุงูุฎุงุฏู ูุฑุฌุน ุงูุชููู ููุนููู
4. ุงูุนููู ูุณุชุฎุฏู ุงูุชููู ููุงุชุตุงู ุจู Ably

**ุงูุฃูุงู:**
- โ API Key ูุง ูุธูุฑ ูู ุงูููุฏ
- โ API Key ูุญููุธ ูู ูุชุบูุฑุงุช ุงูุจูุฆุฉ
- โ ุงูุชููู ูุญุฏูุฏ ุงูุตูุงุญูุงุช ููููุงุฉ ุงููุทููุจุฉ ููุท

### 2. ูููู Chat (`app/components/Chat.tsx`)

**ุงููุธููุฉ:**
- ูุงุฌูุฉ ุงูุฏุฑุฏุดุฉ ุงููุงููุฉ
- Client Component (ูุนูู ูู ุงููุชุตูุญ)

**ุงูููุฒุงุช:**

#### ุฃ. ุงูุงุชุตุงู ุจู Ably
- ูุฌูุจ ุงูุชููู ูู Token Endpoint
- ููุดุฆ ุงุชุตุงู Ably Realtime
- ูุนุฑุถ ุญุงูุฉ ุงูุงุชุตุงู (ูุชุตู/ุบูุฑ ูุชุตู)

#### ุจ. ุฅุฑุณุงู ูุงุณุชูุจุงู ุงูุฑุณุงุฆู
- ุงูุงุดุชุฑุงู ูู ููุงุฉ `chat:general`
- ุฅุฑุณุงู ุฑุณุงุฆู ุฌุฏูุฏุฉ
- ุงุณุชูุจุงู ุงูุฑุณุงุฆู ูุญุธูุงู
- ุนุฑุถ ุงูุฑุณุงุฆู ูุน ุงุณู ุงููุฑุณู ูุงูููุช

#### ุฌ. Presence (ุงููุชูุงุฌุฏูู)
- ุงูุฏุฎูู ูู Presence ุนูุฏ ุงูุงุชุตุงู
- ุนุฑุถ ูุงุฆูุฉ ุงููุชูุงุฌุฏูู ุงูุขู
- ุชุญุฏูุซ ุงููุงุฆูุฉ ุนูุฏ ุฏุฎูู/ุฎุฑูุฌ ุงููุณุชุฎุฏููู
- ุชุญุฏูุซ Presence ุนูุฏ ุชุบููุฑ ุงุณู ุงููุณุชุฎุฏู

#### ุฏ. History (ุงูุชุงุฑูุฎ)
- ุชุญููู ุขุฎุฑ 20 ุฑุณุงูุฉ ุนูุฏ ูุชุญ ุงูุตูุญุฉ
- ุนุฑุถ ุงูุฑุณุงุฆู ุงููุฏููุฉ ูุจู ุงูุฑุณุงุฆู ุงูุฌุฏูุฏุฉ

#### ูู. ูุงุฌูุฉ ุงููุณุชุฎุฏู
- Header ูุน ุงุณู ุงูุชุทุจูู ูุญุงูุฉ ุงูุงุชุตุงู
- ูุงุฆูุฉ ุงููุชูุงุฌุฏูู ุนูู ุงููุณุงุฑ
- ููุทูุฉ ุงูุฑุณุงุฆู ูู ุงููุณุท
- ููุทูุฉ ุงูุฅุฏุฎุงู ูู ุงูุฃุณูู
- ุชุตููู ูุชุฌุงูุจ ูุนูู ุนูู ุฌููุน ุงูุฃุฌูุฒุฉ

### 3. ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ (`app/page.tsx`)

ุชุนุฑุถ ูููู Chat ููุท.

### 4. Layout (`app/layout.tsx`)

ูุญุชูู ุนูู metadata ู fonts.

## ๐ ุงููุดุฑ ุนูู Vercel

### ุงูุฎุทูุฉ 1: ุฑูุน ุงูููุฏ

```bash
git add .
git commit -m "Add real-time chat with Ably"
git push origin main
```

### ุงูุฎุทูุฉ 2: ุฅุนุฏุงุฏ Environment Variables

1. ุงุฐูุจ ุฅูู [Vercel Dashboard](https://vercel.com/dashboard)
2. ุงุฎุชุฑ ูุดุฑูุน **Amana-Chat**
3. ุงุถุบุท **Settings** โ **Environment Variables**
4. ุฃุถู ูุชุบูุฑ ุฌุฏูุฏ:
   - **Key:** `ABLY_API_KEY`
   - **Value:** `hXAj1g.wVBH3g:HU-kXrenZK4SJe1mYGg5IM-8M2e092OFqV1JpvWA_Rs`
   - **Environment:** Production, Preview, Development (ุงุฎุชุฑ ุงููู)
5. ุงุถุบุท **Save**

### ุงูุฎุทูุฉ 3: ุฅุนุงุฏุฉ ุงููุดุฑ

- Vercel ุณูุนูุฏ ุงููุดุฑ ุชููุงุฆูุงู
- ุฃู ุงุถุบุท **Deployments** โ **Redeploy**

## โ ุงูุงุฎุชุจุงุฑ

### ุงุฎุชุจุงุฑ ูุญููุงู:

1. ุดุบูู ุงูุชุทุจูู: `npm run dev`
2. ุงูุชุญ `http://localhost:3000` ูู ูุชุตูุญ
3. ุงูุชุญ ููุณ ุงูุฑุงุจุท ูู ูุงูุฐุฉ ุฎุงุตุฉ (Incognito)
4. ุฃุฑุณู ุฑุณุงูุฉ ูู ุฅุญุฏู ุงูููุงูุฐ
5. **ุงููุชูุฌุฉ ุงููุชููุนุฉ:** ุงูุฑุณุงูุฉ ุชุธูุฑ ููุฑุงู ูู ุงููุงูุฐุฉ ุงูุฃุฎุฑู
6. ุชุญูู ูู ูุงุฆูุฉ "ุงููุชูุงุฌุฏูู ุงูุขู" - ูุฌุจ ุฃู ุชุธูุฑ ุฃุณูุงุก ุงููุณุชุฎุฏููู

### ุงุฎุชุจุงุฑ ุนูู Vercel:

1. ุงูุชุญ ุฑุงุจุท ุงูุชุทุจูู ุนูู Vercel
2. ุงูุชุญ ููุณ ุงูุฑุงุจุท ูู ูุชุตูุญ ุขุฎุฑ
3. ุฃุฑุณู ุฑุณุงูุฉ ูู ุฅุญุฏู ุงูููุงูุฐ
4. **ุงููุชูุฌุฉ ุงููุชููุนุฉ:** ุงูุฑุณุงูุฉ ุชุธูุฑ ููุฑุงู ูู ุงููุชุตูุญ ุงูุขุฎุฑ
5. ุชุญูู ูู Presence - ูุฌุจ ุฃู ุชุธูุฑ ุฃุณูุงุก ุงููุณุชุฎุฏููู

## ๐ ุงุณุชูุดุงู ุงูุฃุฎุทุงุก

### ุงููุดููุฉ: "Failed to get Ably token"

**ุงูุฃุณุจุงุจ ุงููุญุชููุฉ:**
- ููู `.env.local` ุบูุฑ ููุฌูุฏ
- API Key ุบูุฑ ุตุญูุญ ูู `.env.local`

**ุงูุญู:**
1. ุชุฃูุฏ ูู ูุฌูุฏ `.env.local` ูู ูุฌูุฏ `Amana-Chat`
2. ุชุฃูุฏ ูู ุฃู API Key ุตุญูุญ
3. ุฃุนุฏ ุชุดุบูู ุงูุชุทุจูู: `npm run dev`

### ุงููุดููุฉ: ุงูุฑุณุงุฆู ูุง ุชุตู

**ุงูุฃุณุจุงุจ ุงููุญุชููุฉ:**
- ุงูุงุชุตุงู ุจู Ably ูุดู
- Token Endpoint ูุง ูุนูู
- API Key ุบูุฑ ุตุญูุญ

**ุงูุญู:**
1. ุงูุชุญ Console ูู ุงููุชุตูุญ (F12)
2. ุชุญูู ูู ูุฌูุฏ ุฃุฎุทุงุก
3. ุงูุชุญ `/api/ably-token` ูู ุงููุชุตูุญ - ูุฌุจ ุฃู ุชุฑู JSON object
4. ุชุฃูุฏ ูู ุฃู API Key ุตุญูุญ

### ุงููุดููุฉ: ุนูู Vercel ูุง ูุนูู

**ุงูุฃุณุจุงุจ ุงููุญุชููุฉ:**
- Environment Variable ุบูุฑ ููุฌูุฏ
- API Key ุบูุฑ ุตุญูุญ ูู Vercel

**ุงูุญู:**
1. ุชุฃูุฏ ูู ุฅุถุงูุฉ `ABLY_API_KEY` ูู Vercel Environment Variables
2. ุชุฃูุฏ ูู ุฃู ุงููููุฉ ุตุญูุญุฉ
3. ุฃุนุฏ ูุดุฑ ุงููุดุฑูุน

### ุงููุดููุฉ: Presence ูุง ูุนูู

**ุงูุฃุณุจุงุจ ุงููุญุชููุฉ:**
- clientId ุบูุฑ ูุญุฏุฏ
- Presence ูู ูุชู ุชูุนููู

**ุงูุญู:**
- ุงูููุฏ ูุฏุฎู ูู Presence ุชููุงุฆูุงู ุนูุฏ ุงูุงุชุตุงู
- ุชุฃูุฏ ูู ุฃู ุงูุงุชุตุงู ูุงุฌุญ (ุงูุถูุก ุงูุฃุฎุถุฑ ูู Header)

## ๐ ููุงุญุธุงุช ูููุฉ

1. **API Key:** ููุฌูุฏ ูู `.env.local` ุฌุงูุฒ ููุงุณุชุฎุฏุงู
2. **ุงูุฃูุงู:** API Key ูุง ูุธูุฑ ูู ุงูููุฏุ ููุท ูู ูุชุบูุฑุงุช ุงูุจูุฆุฉ
3. **ุงูููุงุฉ:** ุฌููุน ุงูุฑุณุงุฆู ูู ููุงุฉ `chat:general`
4. **ุงูุชุงุฑูุฎ:** ูุชู ุชุญููู ุขุฎุฑ 20 ุฑุณุงูุฉ ููุท
5. **Presence:** ูุนูู ุชููุงุฆูุงู ุนูุฏ ุงูุงุชุตุงู

## ๐จ ุงูุชุฎุตูุต

### ุชุบููุฑ ุงุณู ุงูููุงุฉ:

ูู `app/components/Chat.tsx`:
```typescript
const channel = client.channels.get('chat:general'); // ุบููุฑ ููุง
```

ูู `app/api/ably-token/route.ts`:
```typescript
'chat:general': ['subscribe', 'publish', 'presence', 'history'], // ุบููุฑ ููุง
```

### ุชุบููุฑ ุนุฏุฏ ุงูุฑุณุงุฆู ุงููุญููุฉ:

ูู `app/components/Chat.tsx`:
```typescript
const historyPage = await channel.history({ limit: 20 }); // ุบููุฑ ุงูุฑูู ููุง
```

### ุชุบููุฑ ุงูุฃููุงู:

ุงุณุชุฎุฏู Tailwind CSS classes ูู `app/components/Chat.tsx`

## ๐ ุงูููุงุฑุฏ

- [Ably Documentation](https://ably.com/docs)
- [Next.js Documentation](https://nextjs.org/docs)
- [Tailwind CSS Documentation](https://tailwindcss.com/docs)

## โจ ุงูููุฒุงุช ุงููุถุงูุฉ

โ Real-time messaging  
โ Presence (ุงููุชูุงุฌุฏูู)  
โ History (ุขุฎุฑ 20 ุฑุณุงูุฉ)  
โ ูุงุฌูุฉ ูุณุชุฎุฏู ุฌูููุฉ  
โ ุชุตููู ูุชุฌุงูุจ  
โ ุฃูุงู (Token-based authentication)  
โ ุฏุนู ูุชุนุฏุฏ ุงููุชุตูุญุงุช  

---

**ุฌุงูุฒ ููุงุณุชุฎุฏุงู! ๐**

ุฅุฐุง ูุงู ูุฏูู ุฃู ุฃุณุฆูุฉ ุฃู ูุดุงููุ ุชุญูู ูู ูููุงุช README.md ู SETUP.md

